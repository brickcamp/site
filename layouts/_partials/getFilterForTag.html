{{/* ******* */}}
{{- $tag := . -}}
{{/* ******* */}}

{{- $split := split $tag "-" -}}
{{- $base  := index $split 0 -}}
{{- $type  := index $split 1 | default "else" -}}
{{- $value := index $split 2 | default 0 -}}

{{- $result := dict "base" $base "type" $type "value" $value -}}
{{- return $result -}}

{{/*
{{- $segments    := split $tag "-" -}}
{{- $segmentLast := index (last 1 $segments) 0 -}}

{{- $minimum   :=  0 -}}
{{- $maximum   := -1 -}}
{{- $anyNumber := `^\d+$` -}}
{{- if (findRE $anyNumber $segmentLast) -}}
  {{- $minimum = $segmentLast -}}
  {{- $segment2ndLast := index (last 2 $segments) 0 -}}
  {{- if (findRE $anyNumber $segment2ndLast) -}}
    {{- $maximum  = $segment2ndLast -}}
    {{- $segments = first (sub (len $segments) 2) $segments -}}
  {{- else -}}
    {{- $maximum  = $minimum -}}
    {{- $segments = first (sub (len $segments) 1) $segments -}}
  {{- end -}}
{{- end -}}
{{ $base := index $segments 0 }}
{{ $type := (last (sub (len $segments) 1) $segments) | default 'else' }}
*/}}

